<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Graph Slider Preview</title>
    <style>
        :root {
            font-family: Inter, system-ui, Avenir, Helvetica, Arial, sans-serif;
            line-height: 1.5;
            font-weight: 400;
            color-scheme: light dark;
            color: rgba(255, 255, 255, 0.87);
            background-color: #16130F;
        }

        body {
            margin: 0;
            display: flex;
            place-items: center;
            justify-content: center;
            min-width: 320px;
            min-height: 100vh;
            background: #16130F;
            color: white;
        }

        .slider-container {
            position: relative;
            width: 366px;
            height: 213px;
            cursor: none;
            user-select: none;
            touch-action: none;
        }



        .background-svg {
            position: absolute;
            top: 0;
            left: 0;
            pointer-events: none;
        }

        .foreground-wrapper {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            transition: clip-path 0.1s ease-out;
        }



        .vertical-line {
            position: absolute;
            top: 0;
            bottom: 0;
            left: 0;
            width: 1px;
            background-color: #444;
            pointer-events: none;
            /* Transform will be set in JS */
        }

        .indicator-dot {
            position: absolute;
            top: 0;
            left: 0;
            width: 14px;
            height: 14px;
            background-color: #007AFF;
            border: 2px solid white;
            border-radius: 50%;
            box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.1);
            z-index: 10;
            pointer-events: none;
            /* Transform will be set in JS */
        }

        .indicator-label {
            position: absolute;
            top: 0;
            left: 0;
            background-color: #333;
            color: white;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 14px;
            white-space: nowrap;
            pointer-events: none;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            /* Transform will be set in JS */
        }
    </style>
</head>

<body>

    <div class="slider-container" id="slider">
        <!-- Hidden path for calculation -->
        <svg width="0" height="0" style="position: absolute;">
            <path id="calc-path"
                d="M3.39622 186.948H14.5303C15.2314 186.948 15.8936 186.626 16.3265 186.074L22.9168 177.677C23.7626 176.599 25.3603 176.504 26.3284 177.473L41.5721 192.734C42.0003 193.163 42.5815 193.404 43.1875 193.404H59.2312C59.7142 193.404 60.1848 193.25 60.5752 192.966L67.1611 188.171C68.1134 187.478 69.4369 187.622 70.2166 188.506L77.3631 196.6C78.1747 197.519 79.5674 197.633 80.5177 196.858L104.823 177.037C105.774 176.262 107.166 176.376 107.978 177.296L114.65 184.853C115.606 185.935 117.314 185.87 118.184 184.718L128.222 171.429C128.526 171.026 128.956 170.736 129.443 170.603L145.259 166.284C145.988 166.085 146.572 165.538 146.817 164.823L153.829 144.402C154.053 143.749 154.56 143.233 155.208 142.998L166.644 138.834C167.184 138.638 167.629 138.245 167.893 137.734L172.184 129.402C173.018 127.782 175.32 127.744 176.208 129.335L187.56 149.68C188.121 150.686 189.343 151.116 190.41 150.685L207.469 143.784C208.115 143.523 208.607 142.981 208.803 142.312L221.178 100.267C221.522 99.098 222.723 98.4051 223.907 98.6925L233.424 101.002C234.412 101.242 235.44 100.8 235.945 99.9176L244.91 84.2513C245.585 83.071 247.136 82.7391 248.236 83.5395L252.888 86.9272C254.02 87.7515 255.621 87.3718 256.262 86.1268L256.756 85.1683C257.513 83.698 259.534 83.4954 260.568 84.7861L271.18 98.0327C272.328 99.4649 274.61 99.0268 275.146 97.2716L286.424 60.3201C286.827 59.0008 288.298 58.337 289.554 58.9083L303.47 65.2413C304.34 65.6371 305.364 65.4495 306.037 64.7711L318.656 52.0495C319.085 51.6173 319.668 51.3741 320.277 51.3741H338.657C339.679 51.3741 340.576 52.053 340.854 53.0362L346.821 74.1388C347.347 75.9985 349.802 76.4046 350.899 74.8132L362.604 57.83" />
        </svg>

        <!-- Gradients -->
        <svg width="0" height="0" style="position: absolute;">
            <defs>
                <linearGradient id="blueGradient" x1="0" y1="0" x2="0" y2="1">
                    <stop offset="0%" stop-color="rgba(59, 130, 246, 0.5)" />
                    <stop offset="100%" stop-color="rgba(59, 130, 246, 0)" />
                </linearGradient>
                <linearGradient id="grayGradient" x1="0" y1="0" x2="0" y2="1">
                    <stop offset="0%" stop-color="rgba(255, 255, 255, 0.1)" />
                    <stop offset="100%" stop-color="rgba(255, 255, 255, 0)" />
                </linearGradient>
            </defs>
        </svg>

        <!-- Gray Gradient Fill (Right) -->
        <div class="foreground-wrapper" id="fill-gray">
            <svg width="366" height="213" viewBox="0 0 366 213" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M3.39622 186.948H14.5303C15.2314 186.948 15.8936 186.626 16.3265 186.074L22.9168 177.677C23.7626 176.599 25.3603 176.504 26.3284 177.473L41.5721 192.734C42.0003 193.163 42.5815 193.404 43.1875 193.404H59.2312C59.7142 193.404 60.1848 193.25 60.5752 192.966L67.1611 188.171C68.1134 187.478 69.4369 187.622 70.2166 188.506L77.3631 196.6C78.1747 197.519 79.5674 197.633 80.5177 196.858L104.823 177.037C105.774 176.262 107.166 176.376 107.978 177.296L114.65 184.853C115.606 185.935 117.314 185.87 118.184 184.718L128.222 171.429C128.526 171.026 128.956 170.736 129.443 170.603L145.259 166.284C145.988 166.085 146.572 165.538 146.817 164.823L153.829 144.402C154.053 143.749 154.56 143.233 155.208 142.998L166.644 138.834C167.184 138.638 167.629 138.245 167.893 137.734L172.184 129.402C173.018 127.782 175.32 127.744 176.208 129.335L187.56 149.68C188.121 150.686 189.343 151.116 190.41 150.685L207.469 143.784C208.115 143.523 208.607 142.981 208.803 142.312L221.178 100.267C221.522 99.098 222.723 98.4051 223.907 98.6925L233.424 101.002C234.412 101.242 235.44 100.8 235.945 99.9176L244.91 84.2513C245.585 83.071 247.136 82.7391 248.236 83.5395L252.888 86.9272C254.02 87.7515 255.621 87.3718 256.262 86.1268L256.756 85.1683C257.513 83.698 259.534 83.4954 260.568 84.7861L271.18 98.0327C272.328 99.4649 274.61 99.0268 275.146 97.2716L286.424 60.3201C286.827 59.0008 288.298 58.337 289.554 58.9083L303.47 65.2413C304.34 65.6371 305.364 65.4495 306.037 64.7711L318.656 52.0495C319.085 51.6173 319.668 51.3741 320.277 51.3741H338.657C339.679 51.3741 340.576 52.053 340.854 53.0362L346.821 74.1388C347.347 75.9985 349.802 76.4046 350.899 74.8132L362.604 57.83 L 366 213 L 0 213 Z"
                    fill="url(#grayGradient)" />
            </svg>
        </div>

        <!-- Blue Gradient Fill (Left) -->
        <div class="foreground-wrapper" id="fill-blue">
            <svg width="366" height="213" viewBox="0 0 366 213" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M3.39622 186.948H14.5303C15.2314 186.948 15.8936 186.626 16.3265 186.074L22.9168 177.677C23.7626 176.599 25.3603 176.504 26.3284 177.473L41.5721 192.734C42.0003 193.163 42.5815 193.404 43.1875 193.404H59.2312C59.7142 193.404 60.1848 193.25 60.5752 192.966L67.1611 188.171C68.1134 187.478 69.4369 187.622 70.2166 188.506L77.3631 196.6C78.1747 197.519 79.5674 197.633 80.5177 196.858L104.823 177.037C105.774 176.262 107.166 176.376 107.978 177.296L114.65 184.853C115.606 185.935 117.314 185.87 118.184 184.718L128.222 171.429C128.526 171.026 128.956 170.736 129.443 170.603L145.259 166.284C145.988 166.085 146.572 165.538 146.817 164.823L153.829 144.402C154.053 143.749 154.56 143.233 155.208 142.998L166.644 138.834C167.184 138.638 167.629 138.245 167.893 137.734L172.184 129.402C173.018 127.782 175.32 127.744 176.208 129.335L187.56 149.68C188.121 150.686 189.343 151.116 190.41 150.685L207.469 143.784C208.115 143.523 208.607 142.981 208.803 142.312L221.178 100.267C221.522 99.098 222.723 98.4051 223.907 98.6925L233.424 101.002C234.412 101.242 235.44 100.8 235.945 99.9176L244.91 84.2513C245.585 83.071 247.136 82.7391 248.236 83.5395L252.888 86.9272C254.02 87.7515 255.621 87.3718 256.262 86.1268L256.756 85.1683C257.513 83.698 259.534 83.4954 260.568 84.7861L271.18 98.0327C272.328 99.4649 274.61 99.0268 275.146 97.2716L286.424 60.3201C286.827 59.0008 288.298 58.337 289.554 58.9083L303.47 65.2413C304.34 65.6371 305.364 65.4495 306.037 64.7711L318.656 52.0495C319.085 51.6173 319.668 51.3741 320.277 51.3741H338.657C339.679 51.3741 340.576 52.053 340.854 53.0362L346.821 74.1388C347.347 75.9985 349.802 76.4046 350.899 74.8132L362.604 57.83 L 366 213 L 0 213 Z"
                    fill="url(#blueGradient)" />
            </svg>
        </div>

        <!-- Background Graph (Gray) -->
        <svg class="background-svg" width="366" height="213" viewBox="0 0 366 213" fill="none"
            xmlns="http://www.w3.org/2000/svg">
            <path
                d="M3.39622 186.948H14.5303C15.2314 186.948 15.8936 186.626 16.3265 186.074L22.9168 177.677C23.7626 176.599 25.3603 176.504 26.3284 177.473L41.5721 192.734C42.0003 193.163 42.5815 193.404 43.1875 193.404H59.2312C59.7142 193.404 60.1848 193.25 60.5752 192.966L67.1611 188.171C68.1134 187.478 69.4369 187.622 70.2166 188.506L77.3631 196.6C78.1747 197.519 79.5674 197.633 80.5177 196.858L104.823 177.037C105.774 176.262 107.166 176.376 107.978 177.296L114.65 184.853C115.606 185.935 117.314 185.87 118.184 184.718L128.222 171.429C128.526 171.026 128.956 170.736 129.443 170.603L145.259 166.284C145.988 166.085 146.572 165.538 146.817 164.823L153.829 144.402C154.053 143.749 154.56 143.233 155.208 142.998L166.644 138.834C167.184 138.638 167.629 138.245 167.893 137.734L172.184 129.402C173.018 127.782 175.32 127.744 176.208 129.335L187.56 149.68C188.121 150.686 189.343 151.116 190.41 150.685L207.469 143.784C208.115 143.523 208.607 142.981 208.803 142.312L221.178 100.267C221.522 99.098 222.723 98.4051 223.907 98.6925L233.424 101.002C234.412 101.242 235.44 100.8 235.945 99.9176L244.91 84.2513C245.585 83.071 247.136 82.7391 248.236 83.5395L252.888 86.9272C254.02 87.7515 255.621 87.3718 256.262 86.1268L256.756 85.1683C257.513 83.698 259.534 83.4954 260.568 84.7861L271.18 98.0327C272.328 99.4649 274.61 99.0268 275.146 97.2716L286.424 60.3201C286.827 59.0008 288.298 58.337 289.554 58.9083L303.47 65.2413C304.34 65.6371 305.364 65.4495 306.037 64.7711L318.656 52.0495C319.085 51.6173 319.668 51.3741 320.277 51.3741H338.657C339.679 51.3741 340.576 52.053 340.854 53.0362L346.821 74.1388C347.347 75.9985 349.802 76.4046 350.899 74.8132L362.604 57.83"
                stroke="#333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
        </svg>

        <!-- Foreground Graph (Blue) - Clipped -->
        <div class="foreground-wrapper" id="foreground">
            <svg width="366" height="213" viewBox="0 0 366 213" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M3.39622 186.948H14.5303C15.2314 186.948 15.8936 186.626 16.3265 186.074L22.9168 177.677C23.7626 176.599 25.3603 176.504 26.3284 177.473L41.5721 192.734C42.0003 193.163 42.5815 193.404 43.1875 193.404H59.2312C59.7142 193.404 60.1848 193.25 60.5752 192.966L67.1611 188.171C68.1134 187.478 69.4369 187.622 70.2166 188.506L77.3631 196.6C78.1747 197.519 79.5674 197.633 80.5177 196.858L104.823 177.037C105.774 176.262 107.166 176.376 107.978 177.296L114.65 184.853C115.606 185.935 117.314 185.87 118.184 184.718L128.222 171.429C128.526 171.026 128.956 170.736 129.443 170.603L145.259 166.284C145.988 166.085 146.572 165.538 146.817 164.823L153.829 144.402C154.053 143.749 154.56 143.233 155.208 142.998L166.644 138.834C167.184 138.638 167.629 138.245 167.893 137.734L172.184 129.402C173.018 127.782 175.32 127.744 176.208 129.335L187.56 149.68C188.121 150.686 189.343 151.116 190.41 150.685L207.469 143.784C208.115 143.523 208.607 142.981 208.803 142.312L221.178 100.267C221.522 99.098 222.723 98.4051 223.907 98.6925L233.424 101.002C234.412 101.242 235.44 100.8 235.945 99.9176L244.91 84.2513C245.585 83.071 247.136 82.7391 248.236 83.5395L252.888 86.9272C254.02 87.7515 255.621 87.3718 256.262 86.1268L256.756 85.1683C257.513 83.698 259.534 83.4954 260.568 84.7861L271.18 98.0327C272.328 99.4649 274.61 99.0268 275.146 97.2716L286.424 60.3201C286.827 59.0008 288.298 58.337 289.554 58.9083L303.47 65.2413C304.34 65.6371 305.364 65.4495 306.037 64.7711L318.656 52.0495C319.085 51.6173 319.668 51.3741 320.277 51.3741H338.657C339.679 51.3741 340.576 52.053 340.854 53.0362L346.821 74.1388C347.347 75.9985 349.802 76.4046 350.899 74.8132L362.604 57.83"
                    stroke="#3b82f6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
        </div>

        <!-- Vertical Line -->
        <div class="vertical-line" id="line"></div>

        <!-- Label -->
        <div class="indicator-label" id="label">8:30 AM</div>

        <!-- Indicator -->
        <div class="indicator-dot" id="dot"></div>
    </div>

    <script>
        const slider = document.getElementById('slider');
        const foreground = document.getElementById('foreground');
        const dot = document.getElementById('dot');
        const label = document.getElementById('label');
        const line = document.getElementById('line');
        const calcPath = document.getElementById('calc-path');
        const fillBlue = document.getElementById('fill-blue');
        const fillGray = document.getElementById('fill-gray');

        let isDragging = false;
        let hoverX = 183; // Middle
        let points = [];

        // Initialize lookup table
        function initPoints() {
            const len = calcPath.getTotalLength();
            const step = 0.5;
            for (let i = 0; i <= len; i += step) {
                const point = calcPath.getPointAtLength(i);
                points.push({ x: point.x, y: point.y });
            }
        }

        function getYForX(x) {
            if (points.length === 0) return 0;
            // Find closest point
            let closest = points[0];
            let minDiff = Math.abs(closest.x - x);

            // Optimization: Binary search could be used here, but linear scan is fast enough for 700 points
            // Or better: since points are sorted by path length, but path moves generally left-to-right
            // We can just scan.
            for (let i = 1; i < points.length; i++) {
                const diff = Math.abs(points[i].x - x);
                if (diff < minDiff) {
                    minDiff = diff;
                    closest = points[i];
                }
            }
            return closest.y;
        }

        function updateUI(x) {
            const width = 366;
            const clampedX = Math.max(0, Math.min(width, x));
            const percentage = (clampedX / width) * 100;
            const currentY = getYForX(clampedX);

            // Update clip path
            foreground.style.clipPath = `inset(0 ${100 - percentage}% 0 0)`;
            fillBlue.style.clipPath = `inset(0 ${100 - percentage}% 0 0)`;
            fillGray.style.clipPath = `inset(0 0 0 ${percentage}%)`;

            // Update positions
            line.style.transform = `translateX(${clampedX}px)`;
            label.style.transform = `translate(calc(${clampedX}px - 50%), -40px)`;
            dot.style.transform = `translate(calc(${clampedX}px - 50%), calc(${currentY}px - 50%))`;

            // Update label text
            const totalMinutes = 8 * 60 + (percentage / 100) * 12 * 60;
            const hours = Math.floor(totalMinutes / 60);
            const minutes = Math.floor(totalMinutes % 60);
            const period = hours >= 12 ? 'PM' : 'AM';
            const displayHours = hours > 12 ? hours - 12 : hours;
            const timeString = `${displayHours}:${minutes.toString().padStart(2, '0')} ${period}`;
            label.textContent = timeString;
        }

        function handleInput(clientX) {
            const rect = slider.getBoundingClientRect();
            const x = clientX - rect.left;
            updateUI(x);
        }

        slider.addEventListener('pointermove', (e) => {
            handleInput(e.clientX);
        });

        slider.addEventListener('pointerleave', () => {
            // Optional: could reset or hide, but keeping simple as per request
        });

        // Init
        initPoints();
        updateUI(hoverX);
    </script>

</body>

</html>